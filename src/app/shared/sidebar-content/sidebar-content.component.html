<mat-nav-list>
    <mat-accordion>
        <ng-container *ngFor="let item of content$ | async">
            <ng-container *ngTemplateOutlet="item.children ? hasChildren : noChildren;
                context: { item: item, route: item.route }">
            </ng-container>
        </ng-container>
    </mat-accordion>
</mat-nav-list>

<ng-template #hasChildren let-item="item" let-route="route">
    <mat-expansion-panel>
        <mat-expansion-panel-header>
            <mat-panel-title>
                {{item.displayName}}
            </mat-panel-title>
        </mat-expansion-panel-header>
        <mat-accordion>
            <ng-container *ngFor="let subitem of item.children">
                <ng-container *ngTemplateOutlet="subitem.children ? hasChildren : noChildren;
                        context: { item: subitem, route: route + subitem.route }">
                </ng-container>
            </ng-container>
        </mat-accordion>
    </mat-expansion-panel>
</ng-template>

<ng-template #noChildren let-item="item" let-route="route">
    <a mat-list-item routerLink="{{route}}">
        {{item.displayName}}
    </a>
</ng-template>